<div class="dashboard-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <div class="welcome-text">
        <h2>Welcome back, {{(currentUser$ | async)?.username || 'User'}}!</h2>
        <p>Here's what's happening with your store today.</p>
      </div>
      <div class="welcome-icon">
        <i class="fa fa-store"></i>
      </div>
    </div>
  </div>

  <!-- Search Bar -->
  <!-- <div class="search-section mb-4">
    <div class="search-container">
      <i class="fa fa-search"></i>
      <input type="text" class="form-control" placeholder="Search orders, customers, or cycles...">
    </div>
  </div> -->

  <!-- Stats Cards -->
  <div class="row g-4">
    <div class="col-md-6 col-lg-3">
      <div class="stat-card bg-primary text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-1">Total Cycles</h6>
              <h2 class="card-title mb-0">{{totalCycles}}</h2>
              <small class="text-white-50">+12% from last month</small>
            </div>
            <div class="stat-icon">
              <i class="fa fa-bicycle"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
      <div class="stat-card bg-success text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-1">Today's Orders</h6>
              <h2 class="card-title mb-0">{{todaysOrders}}</h2>
              <small class="text-white-50">+5% from yesterday</small>
            </div>
            <div class="stat-icon">
              <i class="fa fa-shopping-cart"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
      <div class="stat-card bg-warning text-dark">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-1">Pending Orders</h6>
              <h2 class="card-title mb-0">{{pendingOrders}}</h2>
              <small class="text-dark-50">Need attention</small>
            </div>
            <div class="stat-icon">
              <i class="fa fa-clock"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
      <div class="stat-card bg-danger text-white">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-1">Low Stock</h6>
              <h2 class="card-title mb-0">{{lowStock}}</h2>
              <small class="text-white-50">Items need restocking</small>
            </div>
            <div class="stat-icon">
              <i class="fa fa-exclamation-triangle"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row g-4 mt-4">
    <!-- Sales Chart and Recent Orders -->
    <div class="col-lg-8">
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-white py-3">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Sales Overview</h5>
            <!-- <div class="btn-group">
              <button class="btn btn-sm btn-outline-secondary">Week</button>
              <button class="btn btn-sm btn-outline-secondary active">Month</button>
              <button class="btn btn-sm btn-outline-secondary">Year</button>
            </div> -->
          </div>
        </div>
        <div class="card-body">
          <div class="chart-container">
            <canvas #salesChart></canvas>
          </div>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-header bg-white py-3">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Recent Orders</h5>
            <a routerLink="/orders" class="btn btn-sm btn-outline-primary">View All</a>
          </div>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="bg-light">
                <tr>
                  <th class="border-0">Order ID</th>
                  <th class="border-0">Customer</th>
                  <th class="border-0">Date</th>
                  <th class="border-0">Amount</th>
                  <th class="border-0">Status</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let order of recentOrders">
                  <td>{{ order.orderId }}</td>
                  <td>{{ order.customerName }}</td>
                  <td>{{ order.orderDate | date:'mediumDate' }}</td>
                  <td>{{ order.totalAmount | currency }}</td>
                  <td>
                    <span class="badge" [ngClass]="{
                      'bg-warning': order.status === 'Pending',
                      'bg-info': order.status === 'Processing',
                      'bg-primary': order.status === 'Shipped',
                      'bg-success': order.status === 'Delivered',
                      'bg-danger': order.status === 'Cancelled'                   
                    }">{{ order.status }}</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Quick Actions and Notifications -->
    <div class="col-lg-4">
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-white py-3">
          <h5 class="mb-0">Quick Actions</h5>
        </div>
        <div class="card-body">
          <div class="d-grid gap-3">
            <button class="btn btn-action btn-outline-success" routerLink="/orders/new">
              <i class="fa fa-cart-plus me-2"></i> Create New Order
            </button>
            <button class="btn btn-action btn-outline-info" routerLink="/customers/new">
              <i class="fa fa-user-plus me-2"></i> Add New Customer
            </button>
            <ng-container *ngIf="authService.isAdmin()">
              <button class="btn btn-action btn-outline-primary" routerLink="/cycles/new">
                <i class="fa fa-plus me-2"></i> Add New Cycle
              </button>
            </ng-container>
            <ng-container *ngIf="authService.isAdmin()">
              <button class="btn btn-action btn-outline-secondary" routerLink="/users/new">
                <i class="fa fa-plus me-2"></i> Add New User
              </button>
            </ng-container>
          </div>
        </div>
      </div>

      <div class="card shadow-sm">
        <div class="card-header bg-white py-3">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Notifications</h5>
            <span class="badge bg-primary">3 New</span>
          </div>
        </div>
        <div class="card-body p-0">
          <div class="notification-list">
            <div class="notification-item">
              <div class="notification-icon bg-success">
                <i class="fa fa-check"></i>
              </div>
              <div class="notification-content">
                <h6>New Order Received</h6>
                <p>Order #1234 from John Doe</p>
                <small class="text-muted">2 minutes ago</small>
              </div>
            </div>
            <div class="notification-item">
              <div class="notification-icon bg-warning">
                <i class="fa fa-exclamation"></i>
              </div>
              <div class="notification-content">
                <h6>Low Stock Alert</h6>
                <p>Mountain Bike X1 is running low</p>
                <small class="text-muted">1 hour ago</small>
              </div>
            </div>
            <div class="notification-item">
              <div class="notification-icon bg-info">
                <i class="fa fa-info"></i>
              </div>
              <div class="notification-content">
                <h6>System Update</h6>
                <p>New features available</p>
                <small class="text-muted">Yesterday</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>